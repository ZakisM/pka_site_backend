(this.webpackJsonppka_site_frontend=this.webpackJsonppka_site_frontend||[]).push([[0],{201:function(e,t,a){e.exports=a(299)},297:function(e,t,a){},299:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(12),i=a.n(o),s=a(323),l=a(50),u=a(57),d=a(327),m=a(328),p=a(329),h=a(331),E=a(51),b=a(341),f=a(330),v=a(179),g=a.n(v),w=a(339),y=a(345),S=a(325),O=a(326),C=a(30),j=a(91),k=a(39),T=Object(s.a)((function(e){return{link:{color:"white",textDecoration:"none"},linkDisabled:{pointerEvents:"none",cursor:"default"},item:{height:"5.7ch","&:hover":{backgroundColor:Object(k.b)(e.palette.common.white,.025)},"&:active":{backgroundColor:Object(k.b)(e.palette.common.white,.05)}},itemText:{marginLeft:"-12.5px"},active:{borderLeft:"5px solid #7a1d23",backgroundColor:Object(k.b)(e.palette.common.white,.05)}}})),x=function(e){var t=e.text,a=e.Icon,n=T(),r="/".concat(t.toLowerCase()),o=Object(C.h)({path:r});return c.a.createElement(j.a,{to:o?"":r,className:"".concat(n.link," ").concat(o?n.linkDisabled:null)},c.a.createElement(y.a,{className:"".concat(n.item," ").concat(o?n.active:null),key:t},c.a.createElement(S.a,null,c.a.createElement(a,null)),c.a.createElement(O.a,null,c.a.createElement(E.a,{variant:"button",className:n.itemText},t))))},N=a(177),R=a.n(N),A=a(176),_=a.n(A),D=a(178),I=a.n(D),L=a(28),P=(a(210),Object(s.a)((function(e){var t;return{drawer:Object(u.a)({},e.breakpoints.up("sm"),{width:220,flexShrink:0}),appBar:(t={},Object(u.a)(t,e.breakpoints.up("sm"),{marginLeft:220}),Object(u.a)(t,"zIndex",e.zIndex.drawer+1),t),appBarTitle:{fontFamily:"Raleway",fontSize:"1.5rem",fontWeight:800},menuButton:Object(u.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:220,backgroundColor:"#0b0b0b"}}}))),H=function(){var e=Object(L.a)(),t=P(),a=c.a.useState(!1),n=Object(l.a)(a,2),r=n[0],o=n[1],i=function(){o(!r)},s=c.a.createElement("div",null,c.a.createElement("div",{className:t.toolbar}),c.a.createElement(d.a,null),c.a.createElement(m.a,null,c.a.createElement(x,{text:"Watch",Icon:_.a}),c.a.createElement(x,{text:"Episodes",Icon:R.a}),c.a.createElement(x,{text:"Events",Icon:I.a})),c.a.createElement(d.a,null));return c.a.createElement("div",null,c.a.createElement(p.a,{position:"fixed",className:t.appBar},c.a.createElement(f.a,null,c.a.createElement(h.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:i,className:t.menuButton},c.a.createElement(g.a,null)),c.a.createElement(E.a,{noWrap:!0,className:t.appBarTitle},"PKA INDEX"))),c.a.createElement("nav",{className:t.drawer,"aria-label":"All links"},c.a.createElement(b.a,{smUp:!0,implementation:"js"},c.a.createElement(w.a,{variant:"temporary",anchor:"rtl"===e.direction?"right":"left",open:r,onClose:i,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0}},s)),c.a.createElement(b.a,{xsDown:!0,implementation:"js"},c.a.createElement(w.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0},s))))},M=a(81),U=a.n(M),V=a(127),Y=a(188),B=a.n(Y),z=a(342),F=a(332),W=a(333),K=a(344),Q=Object(s.a)((function(){return{avatar:{backgroundColor:"#7a1d23",color:"white",width:"5ch"},resultCard:{backgroundColor:Object(k.b)("#7a1d23",.35),"&:hover":{backgroundColor:Object(k.b)("#7a1d23",.5),cursor:"pointer"},"&:active":{backgroundColor:Object(k.b)("#7a1d23",.2),cursor:"pointer"}}}})),J=function(e){var t=Q(),a=e.episodeNumber,n=e.title,r=e.subtitle;return c.a.createElement(F.a,{className:t.resultCard},c.a.createElement(W.a,{avatar:c.a.createElement(K.a,{variant:"rounded","aria-label":"recipe",className:t.avatar},a),title:n,subheader:r}))},q=a(180),G=a(193),X=a(128),$=a(129),Z=a(130),ee=a(56),te=a.n(ee);!function(e){e.EPISODE="Episode",e.EVENT="Event"}(n||(n={}));var ae,ne=function(){function e(t,a,n){Object($.a)(this,e),this.episodeNumber=void 0,this.timestamp=void 0,this.description=void 0,this.episodeNumber=t,this.timestamp=a,this.description=n}return Object(Z.a)(e,[{key:"cardTitle",value:function(){return this.description}},{key:"cardSubtitle",value:function(){return"Starts at ".concat(te.a.utc(1e3*Number(this.timestamp)).format("HH:mm:ss"))}}],[{key:"Deserialize",value:function(t){return new e(t.episodeNumber,t.timestamp,t.description)}}]),e}(),re=function(){function e(t,a,n){Object($.a)(this,e),this.episodeNumber=void 0,this.uploadDate=void 0,this.title=void 0,this.timestamp=0,this.episodeNumber=t,this.uploadDate=a,this.title=n}return Object(Z.a)(e,[{key:"cardTitle",value:function(){return this.title}},{key:"cardSubtitle",value:function(){return te.a.utc(1e3*Number(this.uploadDate)).format("dddd Do MMMM YYYY")}}],[{key:"Deserialize",value:function(t){return new e(t.episodeNumber,t.uploadDate,t.title)}}]),e}();!function(e){e.STARTED="SEARCH_EVENT_STARTED",e.FAILURE="SEARCH_EVENT_FAILURE",e.SUCCESS="SEARCH_EVENT_SUCCESS",e.CLEAR="SEARCH_EVENT_CLEAR",e.SET_SEARCH_TYPE="SET_SEARCH_TYPE"}(ae||(ae={}));var ce,oe=a(131),ie=a(98),se=a.n(ie),le=function(){return{type:ae.STARTED}},ue=function(e){return{type:ae.SUCCESS,payload:e}},de=function(e){return{type:ae.FAILURE,meta:{error:e}}},me=function(e){return{type:ae.SET_SEARCH_TYPE,payload:e}},pe=a(33),he=a(340),Ee=a(334),be=a(183),fe=a(102),ve=a(80);!function(e){e.STARTED="PLAYER_STARTED",e.FAILURE="PLAYER_FAILURE",e.SUCCESS="PLAYER_SUCCESS",e.SAVE_TIMESTAMP="PLAYER_SAVE_TIMESTAMP",e.SET_EVENT_CARD="PLAYER_SET_EVENT_CARD"}(ce||(ce={}));var ge=function(e,t){return function(a){a(we()),se.a.get("/v1/api/pka_episode/watch/".concat(e)).then((function(e){var n={episode:e.data.data.episode,youtubeDetails:e.data.data.youtubeDetails,events:e.data.data.events,timestamp:t};return a(ye(n))})).catch((function(e){return e="Network Error"===e.message?"Server appears to be offline.":e.response?e.response.data.message:e.message,a(Se(e.message))}))}},we=function(){return{type:ce.STARTED}},ye=function(e){return{type:ce.SUCCESS,payload:e}},Se=function(e){return{type:ce.FAILURE,meta:{error:e}}},Oe=Object(s.a)((function(e){return{root:{height:"95%",width:"100%",display:"flex",flexFlow:"column"},search:{borderRadius:e.spacing(1),backgroundColor:Object(k.b)(e.palette.common.black,.15),"&:hover":{backgroundColor:Object(k.b)(e.palette.common.black,.25)},marginBottom:"2ch",alignItems:"center",display:"flex",padding:e.spacing(1)},iconButton:{padding:10,pointerEvents:"none",display:"flex"},inputInput:{color:"inherit",marginLeft:e.spacing(.5),flex:1},subTitle:{display:"flex",fontSize:"1.75ch",color:Object(k.b)(e.palette.common.white,.45),marginBottom:"1ch"}}})),Ce=Object(pe.c)((function(e){return{searchState:e.search,pathname:e.router.location.pathname}}),(function(e){return{searchPKAItem:function(t,a){return e(function(e,t){return function(a){a(le()),a(me(t));var r=function(){switch(t){case n.EPISODE:return"search_pka_episode";case n.EVENT:return"search_pka_event"}}();se.a.post("/v1/api/".concat(r),{query:e}).then((function(r){var c=[];switch(t){case n.EPISODE:var o,i=Object(oe.a)(r.data.data);try{for(i.s();!(o=i.n()).done;){var s=o.value;c.push(re.Deserialize(s))}}catch(m){i.e(m)}finally{i.f()}break;case n.EVENT:var l,u=Object(oe.a)(r.data.data);try{for(u.s();!(l=u.n()).done;){var d=l.value;c.push(ne.Deserialize(d))}}catch(m){u.e(m)}finally{u.f()}}return a(ue({searchQuery:e,searchResults:c}))})).catch((function(e){return e="Network Error"===e.message?"Server appears to be offline.":e.response?e.response.data.message:e.message,a(de(e.message))}))}}(t,a))},watchPKAEpisode:function(t,a){return e(ge(t,a))},searchEventClearResults:function(){return e({type:ae.CLEAR})}}}))((function(e){var t=Oe(),a=e.watchPKAEpisode,o=e.searchPKAItem,i=e.searchEventClearResults,s=e.searchState,u=e.pathname,d=e.searchItemType,m=Object(q.a)((function(){return Object(G.a)(o,250)})),p=Object(r.useState)(""),h=Object(l.a)(p,2),b=h[0],f=h[1],v=Object(r.useRef)(null),g=Object(C.g)();Object(r.useEffect)((function(){var e=v.current;e&&e.focus();var t=function(){e&&(f(""===b?" ":""),f(e.value))};return ve.isMobile?window.addEventListener("orientationchange",t):window.addEventListener("resize",t),function(){ve.isMobile?window.removeEventListener("orientationchange",t):window.removeEventListener("resize",t)}}),[b]),Object(X.useAsync)(Object(V.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=v.current)&&t.focus(),"/episodes"!==u){e.next=6;break}return f(""),e.next=6,m(b,d);case 6:case"end":return e.stop()}}),e)}))),[u]),Object(X.useAsync)(Object(V.a)(U.a.mark((function e(){var t;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=v.current)&&t.focus(),d!==n.EPISODE){e.next=9;break}return e.next=5,i();case 5:return e.next=7,m(b,d);case 7:e.next=18;break;case 9:if(!(b.trim().length<=2)){e.next=14;break}return e.next=12,i();case 12:e.next=18;break;case 14:return e.next=16,i();case 16:return e.next=18,m(b,d);case 18:case"end":return e.stop()}}),e)}))),[b]);var w=new fe.b({fixedWidth:!0,defaultHeight:80}),y=function(e){var t=e.index;return w.rowHeight({index:t})+5},S=function(e){var t=e.index,n=e.key,r=e.style,o=e.parent,i=s.searchResults[t];return c.a.createElement(fe.a,{key:n,cache:w,parent:o,rowIndex:t},c.a.createElement("div",{style:r,onClick:function(){return e=i.episodeNumber,t=i.timestamp,a(e,t),void g.push("/watch");var e,t}},c.a.createElement(J,{episodeNumber:i.episodeNumber,title:i.cardTitle(),subtitle:i.cardSubtitle()})))};return c.a.createElement(he.a,{height:"97.5%",key:d},c.a.createElement(he.a,{className:t.root},c.a.createElement("div",{className:t.search},c.a.createElement("div",{className:t.iconButton},c.a.createElement(B.a,null)),c.a.createElement(z.a,{error:!0,inputRef:v,placeholder:"Search ".concat(d,"s"),classes:{input:t.inputInput},inputProps:{"aria-label":"search"},fullWidth:!0,onChange:function(e){return f(e.target.value)}}),s.isLoading&&c.a.createElement("div",{className:t.iconButton},c.a.createElement(Ee.a,{color:"primary",size:23,thickness:5}))),s.searchType===d&&c.a.createElement("div",{style:{height:"100%"}},!s.isLoading&&c.a.createElement(E.a,{variant:"overline",className:t.subTitle},"".concat(s.searchResults.length," Results")),c.a.createElement(be.a,null,(function(e){var t=e.height,a=e.width;return c.a.createElement(fe.c,{height:t,width:a,deferredMeasureMentCache:w,rowCount:s.searchResults.length,rowRenderer:S,rowHeight:y,overscanRowCount:10})})))))})),je=a(189),ke=a.n(je),Te=a(335),xe=Object(s.a)((function(e){return{resultCard:{padding:"2ch",backgroundColor:Object(k.b)("#7a1d23",.15),color:Object(k.b)(e.palette.common.white,.6),"&:hover":{backgroundColor:Object(k.b)("#7a1d23",.5),color:e.palette.common.white,cursor:"pointer"},"&:active":{backgroundColor:Object(k.b)("#7a1d23",.2),color:Object(k.b)(e.palette.common.white,.6),cursor:"pointer"}},active:{backgroundColor:Object(k.b)("#7a1d23",.5),color:e.palette.common.white},title:{fontSize:"0.9rem",marginBottom:"0.75ch"},subtitle:{fontSize:"0.875rem",color:Object(k.b)(e.palette.common.white,.6)}}})),Ne=Object(pe.c)((function(e){return{watchEpisodeState:e.watchEpisode}}))((function(e){var t=xe(),a=e.id,n=e.title,o=e.timestamp,i=e.watchEpisodeState,s=Object(r.useRef)(null),u=Object(r.useState)(!1),d=Object(l.a)(u,2),m=d[0],p=d[1];return Object(r.useEffect)((function(){var e=s.current;void 0!==i.events&&i.currentEventCard===a?p(!0):p(!1),e&&m&&e.scrollIntoView({behavior:"smooth",block:"center"})}),[i.events,i.currentEventCard,a,m]),c.a.createElement(F.a,{ref:s,className:"".concat(t.resultCard," ").concat(m?t.active:null)},c.a.createElement(E.a,{className:t.title},n),c.a.createElement(E.a,{className:t.subtitle},te.a.utc(1e3*Number(o)).format("HH:mm:ss")))})),Re=a(336),Ae=Object(s.a)((function(){return{videoCard:{height:"100%",backgroundColor:"#151515",marginRight:"2ch",display:"flex",flexFlow:"column",width:"75%"},fullWidth:{width:"100%"},halfHeight:{marginTop:"2ch",height:"80%",width:"100%"},fullHeight:{height:"100%"},flexColumn:{flexFlow:"column"},eventsWidth:{width:"25%"},eventsCard:{backgroundColor:"#151515",display:"flex",flexFlow:"column"},eventsHeader:{textAlign:"center",backgroundColor:"#111111"},listItem:{marginBottom:"1ch"}}})),_e=Object(pe.c)((function(e){return{watchEpisodeState:e.watchEpisode}}),(function(e){return{watchPKAEpisode:function(t,a){return e(ge(t,a))},saveTimestamp:function(t){return e(function(e){return{type:ce.SAVE_TIMESTAMP,payload:e}}(t))},setCurrentEventCard:function(t){return e(function(e){return{type:ce.SET_EVENT_CARD,payload:e}}(t))}}}))((function(e){var t=Ae(),a=e.setCurrentEventCard,n=e.saveTimestamp,o=e.watchPKAEpisode,i=e.watchEpisodeState,s=Object(r.useRef)(null),u=Object(r.useState)(!1),d=Object(l.a)(u,2),p=d[0],h=d[1];Object(r.useEffect)((function(){i.isLoading||(void 0===i.episode?(o("latest",0),h(!0)):i.events.forEach((function(e,t){i.timestamp>=e.timestamp&&a(t)})))}),[a,i.episode,i.events,i.isLoading,i.timestamp,o]);var E,b,f=function(e){0===e&&(e=1);var t=s.current;t&&!p&&t.seekTo(e||i.timestamp,"seconds")},v=function(){return i.events&&i.events.length>0},g=function(){return ve.isMobile&&window.outerHeight>=window.outerWidth};return void 0===i.episode||i.isLoading?c.a.createElement(he.a,{display:"flex",flex:"1",height:"95%"},c.a.createElement(F.a,{className:t.videoCard},c.a.createElement("div",{style:{height:"100%"}},c.a.createElement(Re.a,{variant:"rect",width:"100%",height:"100%"})),c.a.createElement(W.a,{title:c.a.createElement(Re.a,null),subheader:c.a.createElement(Re.a,{width:"40%"})})),c.a.createElement(F.a,{className:t.eventsCard},c.a.createElement(W.a,{className:t.eventsHeader,subheader:"Events"}),c.a.createElement(he.a,{maxHeight:"92.5%",style:{overflow:"hidden"}},c.a.createElement(Te.a,null,c.a.createElement(m.a,null,Array(10).fill(0).map((function(e,a){return c.a.createElement("div",{className:t.listItem,key:a},c.a.createElement(Re.a,{variant:"rect",width:"100%",height:"10vh"}))}))))))):c.a.createElement(he.a,{display:"flex",height:"95%",className:g()?t.flexColumn:""},c.a.createElement(F.a,{className:"".concat(t.videoCard," ").concat(g()||!v()?t.fullWidth:null)},c.a.createElement("div",{style:{height:"100%"}},c.a.createElement(ke.a,{ref:s,config:{youtube:{preload:!0}},url:function(){var e,t=null===(e=i.youtubeDetails)||void 0===e?void 0:e.videoId;return"".concat("https://www.youtube.com/watch?v=").concat(t,"&origin=").concat(window.location.origin,"&enablejsapi=1")}(),width:"100%",height:"100%",controls:!0,playing:!0,onError:function(e){return console.log(e)},onProgress:function(){return function(){var e=s.current;e&&n(e.getCurrentTime())}()},onPlay:function(){p&&h(!1)},onReady:function(){return f()}})),c.a.createElement(W.a,{title:null===(E=i.youtubeDetails)||void 0===E?void 0:E.title,subheader:te.a.utc(1e3*Number(null===(b=i.episode)||void 0===b?void 0:b.uploadDate)).format("dddd Do MMMM YYYY")})),v()&&c.a.createElement(F.a,{className:"".concat(t.eventsCard," ").concat(g()?t.halfHeight:t.eventsWidth)},c.a.createElement(W.a,{className:t.eventsHeader,subheader:"Events"}),c.a.createElement(he.a,{maxHeight:"92.5%",style:{overflow:"scroll"}},c.a.createElement(Te.a,null,c.a.createElement(m.a,null,i.events.map((function(e,a){return c.a.createElement("div",{className:t.listItem,key:a,onClick:function(){return f(e.timestamp)}},c.a.createElement(Ne,{id:a,title:e.description,timestamp:e.timestamp}))})))))))})),De=a(66),Ie=a(49),Le=a(101),Pe=a(27),He=a(19),Me={searchQuery:"",searchResults:[],isLoading:!1,errors:[]};function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae.STARTED:return Object(Pe.a)({},e,{isLoading:!0});case ae.FAILURE:return Object(Pe.a)({},e,{isLoading:!1,errors:[].concat(Object(Le.a)(e.errors),[t.meta.error])});case ae.SUCCESS:return Object(Pe.a)({},e,{isLoading:!1},t.payload);case ae.CLEAR:return Object(Pe.a)({},e,{searchResults:[]});case He.b:return Object(Pe.a)({},e,{searchQuery:"",searchResults:[]});case ae.SET_SEARCH_TYPE:return Object(Pe.a)({},e,{searchType:t.payload});default:return e}}var Ve={episode:void 0,events:void 0,youtubeDetails:void 0,timestamp:0,currentEventCard:0,isLoading:!1,errors:[]};function Ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce.STARTED:return Object(Pe.a)({},e,{isLoading:!0});case ce.FAILURE:return Object(Pe.a)({},e,{isLoading:!1,errors:[].concat(Object(Le.a)(e.errors),[t.meta.error])});case ce.SUCCESS:return Object(Pe.a)({},e,{isLoading:!1},t.payload);case ce.SAVE_TIMESTAMP:return Object(Pe.a)({},e,{timestamp:t.payload});case ce.SET_EVENT_CARD:return Object(Pe.a)({},e,{currentEventCard:t.payload});default:return e}}var Be,ze=a(190),Fe=a(22),We=a(191),Ke=a(171),Qe=Object(Fe.a)(),Je=[We.a,Object(Ke.a)(Qe)],qe=[Ie.applyMiddleware.apply(void 0,Je)],Ge=ze.composeWithDevTools.apply(void 0,qe),Xe=Object(Ie.createStore)((Be=Qe,Object(Ie.combineReducers)({router:Object(De.b)(Be),search:Ue,watchEpisode:Ye})),Ge),$e=Object(s.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(4),paddingBottom:e.spacing(6),height:"100vh"},toolbar:e.mixins.toolbar}})),Ze=function(){var e=$e();return c.a.createElement(De.a,{history:Qe},c.a.createElement("div",{className:e.root},c.a.createElement(H,null),c.a.createElement("main",{className:e.content},c.a.createElement("div",{className:e.toolbar}),c.a.createElement(C.d,null,c.a.createElement(C.a,{exact:!0,from:"/",to:"watch"}),c.a.createElement(C.b,{exact:!0,path:"/watch"},c.a.createElement(_e,null)),c.a.createElement(C.b,{exact:!0,path:"/episodes"},c.a.createElement(Ce,{searchItemType:n.EPISODE})),c.a.createElement(C.b,{exact:!0,path:"/events"},c.a.createElement(Ce,{searchItemType:n.EVENT}))))))},et=(a(297),a(298),function(){return c.a.createElement("div",{className:"App"},c.a.createElement(Ze,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var tt=a(192),at=a(337),nt=a(338),rt=Object(tt.a)({palette:{type:"dark",background:{default:"#0f0f0f"},primary:{main:"#4d1419"}}});i.a.render(c.a.createElement(pe.a,{store:Xe},c.a.createElement(at.a,{theme:rt},c.a.createElement(nt.a,null),c.a.createElement(et,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[201,1,2]]]);
//# sourceMappingURL=main.f477ec82.chunk.js.map